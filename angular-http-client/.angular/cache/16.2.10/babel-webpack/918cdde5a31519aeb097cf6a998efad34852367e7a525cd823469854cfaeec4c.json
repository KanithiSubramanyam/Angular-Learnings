{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { map } from 'rxjs';\nexport let DashboardComponent = class DashboardComponent {\n  constructor() {\n    this.showCreateTaskForm = false;\n    this.http = inject(HttpClient);\n    this.allTasks = [];\n  }\n  ngOnInit() {\n    this.fetchAllTask();\n  }\n  OpenCreateTaskForm() {\n    this.showCreateTaskForm = true;\n  }\n  CloseCreateTaskForm() {\n    this.showCreateTaskForm = false;\n  }\n  createTask(form) {\n    console.log(\"Task Created\", form);\n    // this.http.post('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form)\n    // .subscribe( (response)=>{\n    //   console.log(response);\n    // });\n    const headers = new HttpHeaders({\n      'my-header': 'my-header-value'\n    });\n    this.http.post('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form, {\n      headers: headers\n    }).subscribe(response => {\n      console.log(response);\n    });\n  }\n  fetchAllTask() {\n    // this.http.get('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\n    // .subscribe( (response) =>{\n    //   console.log(response);\n    // })\n    this.http.get('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json').pipe(map(response => {\n      //transform data\n      let tasks = [];\n      for (let key in response) {\n        if (response.hasOwnProperty(key)) {\n          tasks.push({\n            ...response[key],\n            id: key\n          });\n        }\n      }\n      return tasks;\n    })).subscribe(response => {\n      this.allTasks = response;\n      // console.log(response);\n    });\n  }\n};\n\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})], DashboardComponent);","map":{"version":3,"names":["Component","inject","HttpClient","HttpHeaders","map","DashboardComponent","constructor","showCreateTaskForm","http","allTasks","ngOnInit","fetchAllTask","OpenCreateTaskForm","CloseCreateTaskForm","createTask","form","console","log","headers","post","subscribe","response","get","pipe","tasks","key","hasOwnProperty","push","id","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\sails\\Angular\\angular-http-client\\src\\app\\dashboard\\dashboard.component.ts"],"sourcesContent":["import { Component, OnInit, inject } from '@angular/core';\r\nimport { Task } from '../model/task';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  showCreateTaskForm: boolean = false;\r\n\r\n  http: HttpClient = inject(HttpClient);\r\n\r\n  allTasks: Task[] = [];\r\n  ngOnInit(): void {\r\n    this.fetchAllTask();\r\n  }\r\n  OpenCreateTaskForm() {\r\n    this.showCreateTaskForm = true;\r\n  }\r\n\r\n  CloseCreateTaskForm() {\r\n    this.showCreateTaskForm = false;\r\n  }\r\n\r\n  createTask(form: Task) {\r\n    console.log(\"Task Created\", form);\r\n    // this.http.post('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form)\r\n    // .subscribe( (response)=>{\r\n    //   console.log(response);\r\n    // });\r\n\r\n    const headers = new HttpHeaders({ 'my-header': 'my-header-value' })\r\n    this.http.post<{ name: string }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form, { headers: headers })\r\n      .subscribe((response) => {\r\n        console.log(response);\r\n      });\r\n  }\r\n\r\n  private fetchAllTask() {\r\n    // this.http.get('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\r\n    // .subscribe( (response) =>{\r\n    //   console.log(response);\r\n    // })\r\n\r\n    this.http.get<{ [key: string]: Task }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\r\n      .pipe(map((response) => {\r\n        //transform data\r\n        let tasks = [];\r\n\r\n        for (let key in response) {\r\n          if (response.hasOwnProperty(key)) {\r\n            tasks.push({ ...response[key], id: key });\r\n          }\r\n        }\r\n        return tasks;\r\n      }))\r\n      .subscribe((response) => {\r\n        this.allTasks = response;\r\n        // console.log(response);\r\n      })\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAUC,MAAM,QAAQ,eAAe;AAEzD,SAASC,UAAU,EAAEC,WAAW,QAAQ,sBAAsB;AAC9D,SAASC,GAAG,QAAQ,MAAM;AAOnB,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAAxBC,YAAA;IACL,KAAAC,kBAAkB,GAAY,KAAK;IAEnC,KAAAC,IAAI,GAAeP,MAAM,CAACC,UAAU,CAAC;IAErC,KAAAO,QAAQ,GAAW,EAAE;EAiDvB;EAhDEC,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EACAC,kBAAkBA,CAAA;IAChB,IAAI,CAACL,kBAAkB,GAAG,IAAI;EAChC;EAEAM,mBAAmBA,CAAA;IACjB,IAAI,CAACN,kBAAkB,GAAG,KAAK;EACjC;EAEAO,UAAUA,CAACC,IAAU;IACnBC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEF,IAAI,CAAC;IACjC;IACA;IACA;IACA;IAEA,MAAMG,OAAO,GAAG,IAAIf,WAAW,CAAC;MAAE,WAAW,EAAE;IAAiB,CAAE,CAAC;IACnE,IAAI,CAACK,IAAI,CAACW,IAAI,CAAmB,+FAA+F,EAAEJ,IAAI,EAAE;MAAEG,OAAO,EAAEA;IAAO,CAAE,CAAC,CAC1JE,SAAS,CAAEC,QAAQ,IAAI;MACtBL,OAAO,CAACC,GAAG,CAACI,QAAQ,CAAC;IACvB,CAAC,CAAC;EACN;EAEQV,YAAYA,CAAA;IAClB;IACA;IACA;IACA;IAEA,IAAI,CAACH,IAAI,CAACc,GAAG,CAA0B,gGAAgG,CAAC,CACrIC,IAAI,CAACnB,GAAG,CAAEiB,QAAQ,IAAI;MACrB;MACA,IAAIG,KAAK,GAAG,EAAE;MAEd,KAAK,IAAIC,GAAG,IAAIJ,QAAQ,EAAE;QACxB,IAAIA,QAAQ,CAACK,cAAc,CAACD,GAAG,CAAC,EAAE;UAChCD,KAAK,CAACG,IAAI,CAAC;YAAE,GAAGN,QAAQ,CAACI,GAAG,CAAC;YAAEG,EAAE,EAAEH;UAAG,CAAE,CAAC;;;MAG7C,OAAOD,KAAK;IACd,CAAC,CAAC,CAAC,CACFJ,SAAS,CAAEC,QAAQ,IAAI;MACtB,IAAI,CAACZ,QAAQ,GAAGY,QAAQ;MACxB;IACF,CAAC,CAAC;EACN;CACD;;AAtDYhB,kBAAkB,GAAAwB,UAAA,EAL9B7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EACW3B,kBAAkB,CAsD9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}