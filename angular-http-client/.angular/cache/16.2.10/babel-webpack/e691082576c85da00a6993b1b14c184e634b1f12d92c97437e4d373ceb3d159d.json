{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { TaskService } from '../services/Task.service';\nexport let DashboardComponent = class DashboardComponent {\n  constructor() {\n    this.showCreateTaskForm = false;\n    this.http = inject(HttpClient);\n    this.allTasks = [];\n    this.taskService = inject(TaskService);\n  }\n  ngOnInit() {\n    this.fetchAllTask();\n  }\n  OpenCreateTaskForm() {\n    this.showCreateTaskForm = true;\n  }\n  CloseCreateTaskForm() {\n    this.showCreateTaskForm = false;\n  }\n  createTask(form) {\n    // console.log(\"Task Created\", form);\n    // // this.http.post('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form)\n    // // .subscribe( (response)=>{\n    // //   console.log(response);\n    // // });\n    // const headers = new HttpHeaders({ 'my-header': 'my-header-value' })\n    // this.http.post<{ name: string }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form, { headers: headers })\n    //   .subscribe((response) => {\n    //     console.log(response);\n    //   });\n    //   this.fetchAllTask();\n    this.taskService.createTask(form);\n  }\n  fetchAllTask() {\n    // // this.http.get('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\n    // // .subscribe( (response) =>{\n    // //   console.log(response);\n    // // })\n    // this.http.get<{ [key: string]: Task }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\n    //   .pipe(map((response) => {\n    //     //transform data\n    //     let tasks = [];\n    //     for (let key in response) {\n    //       if (response.hasOwnProperty(key)) {\n    //         tasks.push({ ...response[key], id: key });\n    //       }\n    //     }\n    //     return tasks;\n    //   }))\n    //   .subscribe((response) => {\n    //     this.allTasks = response;\n    //     // console.log(response);\n    //   })\n    //   this.fetchAllTask();\n    this.taskService.getAllTasks().subscribe(task => {\n      return this.allTasks = task;\n    });\n  }\n  fetchAllTasksToDisplay() {\n    this.fetchAllTask();\n  }\n  deleteTask(key) {\n    this.taskService.deleteTask(key);\n    this.fetchAllTask();\n  }\n  clearAllTasks() {\n    this.taskService.deleteAllTasks();\n    this.fetchAllTask();\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})], DashboardComponent);","map":{"version":3,"names":["Component","inject","HttpClient","TaskService","DashboardComponent","constructor","showCreateTaskForm","http","allTasks","taskService","ngOnInit","fetchAllTask","OpenCreateTaskForm","CloseCreateTaskForm","createTask","form","getAllTasks","subscribe","task","fetchAllTasksToDisplay","deleteTask","key","clearAllTasks","deleteAllTasks","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\sails\\Angular\\angular-http-client\\src\\app\\dashboard\\dashboard.component.ts"],"sourcesContent":["import { Component, OnInit, inject } from '@angular/core';\r\nimport { Task } from '../model/task';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs';\r\nimport { TaskService } from '../services/Task.service';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  showCreateTaskForm: boolean = false;\r\n\r\n  http: HttpClient = inject(HttpClient);\r\n\r\n  allTasks: Task[] = [];\r\n\r\n  taskService : TaskService = inject(TaskService);\r\n\r\n  ngOnInit(): void {\r\n    this.fetchAllTask();\r\n  }\r\n  OpenCreateTaskForm() {\r\n    this.showCreateTaskForm = true;\r\n  }\r\n\r\n  CloseCreateTaskForm() {\r\n    this.showCreateTaskForm = false;\r\n  }\r\n\r\n  createTask(form: Task) {\r\n    // console.log(\"Task Created\", form);\r\n    // // this.http.post('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form)\r\n    // // .subscribe( (response)=>{\r\n    // //   console.log(response);\r\n    // // });\r\n\r\n    // const headers = new HttpHeaders({ 'my-header': 'my-header-value' })\r\n    // this.http.post<{ name: string }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app/tasks.json', form, { headers: headers })\r\n    //   .subscribe((response) => {\r\n    //     console.log(response);\r\n    //   });\r\n    //   this.fetchAllTask();\r\n\r\n\r\n    this.taskService.createTask(form);\r\n\r\n  }\r\n\r\n  private fetchAllTask() {\r\n    // // this.http.get('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\r\n    // // .subscribe( (response) =>{\r\n    // //   console.log(response);\r\n    // // })\r\n\r\n    // this.http.get<{ [key: string]: Task }>('https://angular-httpclient-42340-default-rtdb.asia-southeast1.firebasedatabase.app//tasks.json')\r\n    //   .pipe(map((response) => {\r\n    //     //transform data\r\n    //     let tasks = [];\r\n\r\n    //     for (let key in response) {\r\n    //       if (response.hasOwnProperty(key)) {\r\n    //         tasks.push({ ...response[key], id: key });\r\n    //       }\r\n    //     }\r\n    //     return tasks;\r\n    //   }))\r\n    //   .subscribe((response) => {\r\n    //     this.allTasks = response;\r\n    //     // console.log(response);\r\n    //   })\r\n    //   this.fetchAllTask();\r\n\r\n    this.taskService.getAllTasks().subscribe((task : Task[])=>{\r\n      return this.allTasks = task;\r\n    })\r\n\r\n  }\r\n  fetchAllTasksToDisplay(){\r\n    this.fetchAllTask();\r\n  }\r\n\r\n  deleteTask(key : string)\r\n  {\r\n     this.taskService.deleteTask(key);\r\n     this.fetchAllTask();\r\n  }\r\n  clearAllTasks(){\r\n    this.taskService.deleteAllTasks();\r\n    this.fetchAllTask();\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAUC,MAAM,QAAQ,eAAe;AAEzD,SAASC,UAAU,QAAqB,sBAAsB;AAE9D,SAASC,WAAW,QAAQ,0BAA0B;AAO/C,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAAxBC,YAAA;IACL,KAAAC,kBAAkB,GAAY,KAAK;IAEnC,KAAAC,IAAI,GAAeN,MAAM,CAACC,UAAU,CAAC;IAErC,KAAAM,QAAQ,GAAW,EAAE;IAErB,KAAAC,WAAW,GAAiBR,MAAM,CAACE,WAAW,CAAC;EA0EjD;EAxEEO,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EACAC,kBAAkBA,CAAA;IAChB,IAAI,CAACN,kBAAkB,GAAG,IAAI;EAChC;EAEAO,mBAAmBA,CAAA;IACjB,IAAI,CAACP,kBAAkB,GAAG,KAAK;EACjC;EAEAQ,UAAUA,CAACC,IAAU;IACnB;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IAGA,IAAI,CAACN,WAAW,CAACK,UAAU,CAACC,IAAI,CAAC;EAEnC;EAEQJ,YAAYA,CAAA;IAClB;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA,IAAI,CAACF,WAAW,CAACO,WAAW,EAAE,CAACC,SAAS,CAAEC,IAAa,IAAG;MACxD,OAAO,IAAI,CAACV,QAAQ,GAAGU,IAAI;IAC7B,CAAC,CAAC;EAEJ;EACAC,sBAAsBA,CAAA;IACpB,IAAI,CAACR,YAAY,EAAE;EACrB;EAEAS,UAAUA,CAACC,GAAY;IAEpB,IAAI,CAACZ,WAAW,CAACW,UAAU,CAACC,GAAG,CAAC;IAChC,IAAI,CAACV,YAAY,EAAE;EACtB;EACAW,aAAaA,CAAA;IACX,IAAI,CAACb,WAAW,CAACc,cAAc,EAAE;IACjC,IAAI,CAACZ,YAAY,EAAE;EACrB;CACD;AAjFYP,kBAAkB,GAAAoB,UAAA,EAL9BxB,SAAS,CAAC;EACTyB,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EACWvB,kBAAkB,CAiF9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}